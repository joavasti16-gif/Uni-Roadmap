<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>University Roadmap</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .task-item:hover .edit-buttons {
      opacity: 1;
    }
    .edit-buttons {
      opacity: 0;
      transition: opacity 0.2s;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-4 md:p-8">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-6">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
        üéì UK University Roadmap (for the love of my life)
      </h1>
      <p class="text-gray-600 mb-4">
        Track your journey from 6 offers to university student
      </p>
      
      <!-- Progress Bar -->
      <div class="bg-gray-100 rounded-full h-4 overflow-hidden">
        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-full transition-all duration-500 flex items-center justify-end pr-2" style="width: 0%">
          <span id="progressText" class="text-xs font-bold text-white"></span>
        </div>
      </div>
      <p id="progressCount" class="text-sm text-gray-600 mt-2">0 of 0 tasks completed</p>
    </div>

    <!-- Roadmap Steps -->
    <div id="roadmapContainer" class="space-y-4"></div>

    <!-- Footer Tips -->
    <div class="mt-8 bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6">
      <h3 class="font-bold text-blue-900 mb-2">üí° Quick Tips</h3>
      <ul class="text-sm text-blue-800 space-y-1">
        <li>‚Ä¢ Click on any task to mark it as complete</li>
        <li>‚Ä¢ Hover over tasks to edit or delete them</li>
        <li>‚Ä¢ Click "Add task" at the bottom of each section to add new items</li>
        <li>‚Ä¢ Start scholarship applications early - some close in spring</li>
        <li>‚Ä¢ Keep all documents organized for FIDERH and visa applications</li>
        <li>‚Ä¢ No olvides que te amo y que lo vas a lograr</li>
      </ul>
    </div>
  </div>

  <script>
    // Initial data
    let roadmapSteps = [
      {
        id: 'scholarships',
        title: 'Review and Apply for Scholarships',
        deadline: 'ASAP',
        icon: 'üéì',
        color: 'bg-blue-500',
        tasks: [
          { id: 'lse-review', text: 'LSE - Review scholarships' },
          { id: 'lse-apply', text: 'LSE - Apply for scholarships' },
          { id: 'bristol-review', text: 'Bristol - Review scholarships' },
          { id: 'bristol-apply', text: 'Bristol - Apply for scholarships' },
          { id: 'cardiff-review', text: 'Cardiff - Review scholarships' },
          { id: 'cardiff-apply', text: 'Cardiff - Apply for scholarships' },
          { id: 'nottingham-review', text: 'Nottingham - Review scholarships' },
          { id: 'nottingham-apply', text: 'Nottingham - Apply for scholarships' },
          { id: 'leeds-review', text: 'Leeds - Review scholarships' },
          { id: 'leeds-apply', text: 'Leeds - Apply for scholarships' },
          { id: 'york-review', text: 'York - Review scholarships' },
          { id: 'york-apply', text: 'York - Apply for scholarships' },
        ]
      },
      {
        id: 'fiderh',
        title: 'FIDERH',
        deadline: 'Check specific deadlines',
        icon: 'üìÑ',
        color: 'bg-purple-500',
        tasks: [
          { id: 'fiderh-1', text: 'Documentos de solicitud' },
          { id: 'fiderh-2', text: 'Documentos del solicitante' },
          { id: 'fiderh-3', text: 'Antecedente acad√©micos del solicitante' },
          { id: 'fiderh-4', text: 'Documentos de estudios a realizar' },
          { id: 'fiderh-5', text: 'Documentos generales del aval' },
          { id: 'fiderh-6', text: 'Documentos del inmueble' },
        ]
      },
      {
        id: 'conahcyt',
        title: 'CONAHCYT (SECIHTI)',
        deadline: 'Wait for announcement',
        icon: 'üèõÔ∏è',
        color: 'bg-green-500',
        tasks: [
          { id: 'conahcyt-1', text: 'Esperar a que abra convocatoria' },
        ]
      },
      {
        id: 'visa',
        title: 'Visa Application',
        deadline: 'After receiving CAS',
        icon: '‚úàÔ∏è',
        color: 'bg-yellow-500',
        tasks: [
          { id: 'visa-1', text: 'Recibir CAS' },
          { id: 'visa-2', text: 'Contestar encuesta del consulado de UK' },
          { id: 'visa-3', text: 'Pagar Visa y NHS' },
          { id: 'visa-4', text: 'Hacer cita de datos biom√©tricos' },
        ]
      },
      {
        id: 'house',
        title: 'Buscar casa con Joanita',
        deadline: 'Before moving',
        icon: 'üè†',
        color: 'bg-pink-500',
        tasks: [
          { id: 'house-1', text: 'Budget' },
          { id: 'house-2', text: 'Cercan√≠a' },
          { id: 'house-3', text: 'Comfy' },
          { id: 'house-4', text: 'Love' },
        ]
      },
      {
        id: 'move-uk',
        title: 'Mudarme a UK',
        deadline: 'July-August 2026',
        icon: 'üíï',
        color: 'bg-red-500',
        tasks: [
          { id: 'move-1', text: 'Vivir con el amor de mi vida (Joanita)' },
          { id: 'move-2', text: 'Ser feliz' },
          { id: 'move-3', text: 'Estar tranquilo' },
        ]
      },
    ];

    let completedTasks = {};
    let expandedSteps = {};

    // Load saved data from localStorage
    function loadData() {
      const savedCompleted = localStorage.getItem('completedTasks');
      const savedSteps = localStorage.getItem('roadmapSteps');
      const savedExpanded = localStorage.getItem('expandedSteps');
      
      if (savedCompleted) completedTasks = JSON.parse(savedCompleted);
      if (savedSteps) roadmapSteps = JSON.parse(savedSteps);
      if (savedExpanded) expandedSteps = JSON.parse(savedExpanded);
    }

    // Save data to localStorage
    function saveData() {
      localStorage.setItem('completedTasks', JSON.stringify(completedTasks));
      localStorage.setItem('roadmapSteps', JSON.stringify(roadmapSteps));
      localStorage.setItem('expandedSteps', JSON.stringify(expandedSteps));
    }

    // Update progress bar
    function updateProgress() {
      const totalTasks = roadmapSteps.reduce((sum, step) => sum + step.tasks.length, 0);
      const completedCount = Object.values(completedTasks).filter(Boolean).length;
      const progress = Math.round((completedCount / totalTasks) * 100);
      
      document.getElementById('progressBar').style.width = progress + '%';
      document.getElementById('progressText').textContent = progress > 10 ? progress + '%' : '';
      document.getElementById('progressCount').textContent = `${completedCount} of ${totalTasks} tasks completed`;
    }

    // Toggle task completion
    function toggleTask(taskId) {
      completedTasks[taskId] = !completedTasks[taskId];
      saveData();
      renderRoadmap();
    }

    // Toggle step expansion
    function toggleStep(stepId) {
      expandedSteps[stepId] = !expandedSteps[stepId];
      saveData();
      renderRoadmap();
    }

    // Delete task
    function deleteTask(stepId, taskId) {
      const step = roadmapSteps.find(s => s.id === stepId);
      step.tasks = step.tasks.filter(t => t.id !== taskId);
      delete completedTasks[taskId];
      saveData();
      renderRoadmap();
    }

    // Edit task
    function editTask(stepId, taskId) {
      const step = roadmapSteps.find(s => s.id === stepId);
      const task = step.tasks.find(t => t.id === taskId);
      const newText = prompt('Edit task:', task.text);
      if (newText && newText.trim()) {
        task.text = newText.trim();
        saveData();
        renderRoadmap();
      }
    }

    // Add task
    function addTask(stepId) {
      const newText = prompt('New task:');
      if (newText && newText.trim()) {
        const step = roadmapSteps.find(s => s.id === stepId);
        const newTaskId = `${stepId}-${Date.now()}`;
        step.tasks.push({ id: newTaskId, text: newText.trim() });
        saveData();
        renderRoadmap();
      }
    }

    // Render the roadmap
    function renderRoadmap() {
      const container = document.getElementById('roadmapContainer');
      container.innerHTML = '';

      roadmapSteps.forEach((step, index) => {
        const isExpanded = expandedSteps[step.id];
        const stepCompletedTasks = step.tasks.filter(task => completedTasks[task.id]).length;
        const stepProgress = Math.round((stepCompletedTasks / step.tasks.length) * 100);

        const stepDiv = document.createElement('div');
        stepDiv.className = 'bg-white rounded-xl shadow-lg overflow-hidden';

        // Header
        const header = document.createElement('button');
        header.className = 'w-full p-6 flex items-start gap-4 hover:bg-gray-50 transition-colors';
        header.onclick = () => toggleStep(step.id);
        header.innerHTML = `
          <div class="${step.color} rounded-full p-3 text-white flex-shrink-0 text-2xl">
            ${step.icon}
          </div>
          <div class="flex-1 text-left">
            <div class="flex items-start justify-between gap-2">
              <h2 class="text-xl font-bold text-gray-800">
                ${index + 1}. ${step.title}
              </h2>
              <span class="text-gray-400">${isExpanded ? '‚ñ≤' : '‚ñº'}</span>
            </div>
            <p class="text-sm text-gray-600 mt-1">
              üìÖ ${step.deadline}
            </p>
            <div class="mt-3">
              <div class="bg-gray-200 rounded-full h-2 overflow-hidden">
                <div class="${step.color} h-full transition-all duration-500" style="width: ${stepProgress}%"></div>
              </div>
              <p class="text-xs text-gray-500 mt-1">
                ${stepCompletedTasks}/${step.tasks.length} tasks completed
              </p>
            </div>
          </div>
        `;
        stepDiv.appendChild(header);

        // Tasks (if expanded)
        if (isExpanded) {
          const tasksDiv = document.createElement('div');
          tasksDiv.className = 'px-6 pb-6 space-y-2 bg-gray-50';

          step.tasks.forEach(task => {
            const taskDiv = document.createElement('div');
            taskDiv.className = 'task-item flex items-start gap-3 p-3 rounded-lg hover:bg-white transition-colors group';
            
            const isCompleted = completedTasks[task.id];
            
            taskDiv.innerHTML = `
              <button onclick="toggleTask('${task.id}')" class="flex items-start gap-3 flex-1 text-left">
                <span class="${isCompleted ? 'text-green-500' : 'text-gray-300'} flex-shrink-0 mt-0.5 text-xl">
                  ${isCompleted ? '‚úì' : '‚óã'}
                </span>
                <span class="${isCompleted ? 'text-gray-400 line-through' : 'text-gray-700'}">
                  ${task.text}
                </span>
              </button>
              <div class="edit-buttons flex gap-1">
                <button onclick="editTask('${step.id}', '${task.id}')" class="p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors" title="Edit task">
                  ‚úèÔ∏è
                </button>
                <button onclick="deleteTask('${step.id}', '${task.id}')" class="p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors" title="Delete task">
                  ‚úï
                </button>
              </div>
            `;
            
            tasksDiv.appendChild(taskDiv);
          });

          // Add task button
          const addButton = document.createElement('button');
          addButton.className = 'w-full flex items-center gap-2 p-3 rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition-colors text-gray-500 hover:text-blue-600';
          addButton.onclick = () => addTask(step.id);
          addButton.innerHTML = `
            <span class="text-xl">+</span>
            <span class="text-sm font-medium">Add task</span>
          `;
          tasksDiv.appendChild(addButton);

          stepDiv.appendChild(tasksDiv);
        }

        container.appendChild(stepDiv);
      });

      updateProgress();
    }

    // Initialize
    loadData();
    renderRoadmap();
  </script>
</body>
</html>
